## 정규화

정규화란 데이터의 삽입, 수정, 삭제의 이상현상을 제거하고, 설계과정에서 중복을 최소화하게 데이터를 구조화 하는 프로세스이다. 대부분 3차 정규화까지 진행한다.

- **1차 정규화**

  1차 정규화란 하나의 컬럼에 값이 한개씩만 존재하게 분해하는 것이다.

  | 아이디  | 나이 | 수강과목  |
  | :-----: | :--: | :-------: |
  | abc1234 |  19  |   자바    |
  | xyz5678 |  20  | HTML, CSS |
  | qwe9876 |  21  |   자바    |

  > 위의 표에서 xyz5678의 아이디를 가진 사람은 수강과목이 자바와 DBMS 두 개이다. 이는 제 1 정규형을 위반하고 있으므로 1차 정규화를 통해 분해할 수 있다.

  | 아이디  | 나이 | 수강과목 |
  | :-----: | :--: | :------: |
  | abc1234 |  19  |   자바   |
  | xyz5678 |  20  |   HTML   |
  | xyz5678 |  20  |   CSS    |
  | qwe9876 |  21  |   자바   |

  > 1차 정규화를 통해 위와 같이 테이블을 구성할 수 있다.

- **2차 정규화**

  PK가 여러개로 구성된 복합키를 가진 테이블이 2차 정규화의 대상이 된다. 여기서 복합키 모두에게 의존하지 않고 일부분에만 의존하는 속성들이 존재할 경우, 이를 분리하는 것이다.

  위의 1차 정규화가 완료된 테이블을 보면 아이디, 나이, 수강과목 모두 중복이 되기 때문에 열을 구분하는 용도로 쓸 수 없다. 따라서 아이디와 수강과목을 합친 [아이디, 수강과목] 을 기본키(복합키)로 설정한다. 그러나 여기서 나이는 아이디만 알아도 알 수 있기 때문에 복합키의 일부분인 아이디에만 의존하는 속성이 되어 2차 정규형에 위배된다. 따라서 2차 정규화 과정을 통해 테이블을 분리해야 한다.

  [아이디] 테이블

  | 아이디  | 나이 |
  | :-----: | :--: |
  | abc1234 |  19  |
  | xyz5678 |  20  |
  | qwe9876 |  21  |

  [과목] 테이블

  | 아이디  | 수강과목 |
  | :-----: | :------: |
  | abc1234 |   자바   |
  | xyz5678 |   HTML   |
  | xyz5678 |   CSS    |
  | qwe9876 |   자바   |

  > 2차 정규화를 통해 이렇게 [아이디] 테이블과 [과목] 테이블로 분리할 수 있다.

- **3차 정규화**

  3차 정규화는 제 2정규형을 만족하는 상태에서 이행 함수 종속을 제거하는 정규화 과정이다. 이행 함수 종속이란 X->Y, Y->Z 일 때 X->Z를 만족하는 모순이 발생하는 것이다. 쉽게 말해서 하나의 컬럼은 그 외에 다른 컬럼을 결정할 수 없게 만드는 것이다.

  | 고객번호 | 아이디  |  등급  | 할인율 |
  | :------: | :-----: | :----: | :----: |
  |   001    | abc1234 | Bronze |   5%   |
  |   002    | xyz5678 | Silver |  10%   |
  |   003    | qwe9876 |  Gold  |  15%   |

  > 위의 테이블에서 고객 번호가 등급을 결정하고 등급이 할인율을 결정한다. 그렇다면 논리적으로 고객 번호가 할인율을 결정해버리는 상황이 벌어진다. 이러한 모순을 제거하는 것이 3차 정규화 과정이다.

  [등급] 테이블

  |  등급  | 할인율 |
  | :----: | :----: |
  | Bronze |   5%   |
  | Silver |  10%   |
  |  Gold  |  15%   |

  [고객정보] 테이블

  | 고객번호 | 아이디  |  등급  |
  | :------: | :-----: | :----: |
  |   001    | abc1234 | Bronze |
  |   002    | xyz5678 | Silver |
  |   003    | qwe9876 |  Gold  |

  > 3차 정규화를 통해 이렇게 [등급] 테이블과 [고객정보] 테이블로 분리할 수 있다.

- **반정규화**

  반정규화란 데이터를 활용하는 쪽에서 데이터를 관리, 사용하기에 더 편리하다면 정규화를 진행하지 않는 방법을 말한다. 자바에서 데이터를 가져와서 사용할 때를 예로 들어보자.

  |  음식  |               재료               |
  | :----: | :------------------------------: |
  | 떡볶이 |       떡, 어묵, 고추장, ..       |
  |  김밥  | 김, 오이, 어묵, 햄, 맛살, 밥, .. |
  | 햄버거 |    빵, 패티, 양상추, 소스, ..    |

  > 위의 테이블은 정규형이 위배된 테이블이다. 그러나 이 데이터를 가져와서 사용하는 쪽인 자바에서 음식별 재료를 가져와 `.split(",")`을 통해 [떡, 어묵, 고추장, ..] 처럼 배열로 만들어 사용하기엔 더 편리하다. 따라서 이러한 경우엔 반정규화를 통해 정규화를 진행하지 않는 것이다. 

​	